<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../../../img/favicon.ico" />
    <title>Discourse Deployment Guide - GREENGAGE Documentation</title>
    <link rel="stylesheet" href="../../../css/theme.css" />
    <link rel="stylesheet" href="../../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../../../css/custom.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Discourse Deployment Guide";
        var mkdocs_page_input_path = "tools/Discourse/examples/index.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/yaml.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/rust.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../../.." class="icon icon-home"> GREENGAGE Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../..">Home</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="" href="../../../guidelines">Guidelines</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Tools</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="#">Keycloak</a>
    <ul>
                <li class="toctree-l2"><a class="" href="../../keycloak">Description</a>
                </li>
                <li class="toctree-l2"><a class="" href="../../keycloak/integration">Integration</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="#">Examples</a>
    <ul>
                <li class="toctree-l3"><a class="" href="../../keycloak/examples#nodejs">Node</a>
                </li>
                <li class="toctree-l3"><a class="" href="../../keycloak/examples#python">Python</a>
                </li>
    </ul>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">Collaborative Environment</a>
    <ul>
                <li class="toctree-l2"><a class="" href="../../collaborativeEnvironment">Description</a>
                </li>
                <li class="toctree-l2"><a class="" href="../../collaborativeEnvironment/integration">Usage</a>
                </li>
                <li class="toctree-l2"><a class="" href="../../collaborativeEnvironment/examples">Example of deployment</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">MODE</a>
    <ul>
                <li class="toctree-l2"><a class="" href="../../mode">Description</a>
                </li>
                <li class="toctree-l2"><a class="" href="../../mode/integration">Integration</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="#">Examples</a>
    <ul>
                <li class="toctree-l3"><a class="" href="../../mode/examples/ios">iOS</a>
                </li>
                <li class="toctree-l3"><a class="" href="../../mode/examples/android">Android</a>
                </li>
                <li class="toctree-l3"><a class="" href="../../mode/examples/backend">Backend</a>
                </li>
    </ul>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">Discourse</a>
    <ul>
                <li class="toctree-l2"><a class="" href="..">Description</a>
                </li>
                <li class="toctree-l2"><a class="" href="../integration">Integration</a>
                </li>
                <li class="toctree-l2"><a class="" href=".">Example of deployment</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">DataHub</a>
    <ul>
                <li class="toctree-l2"><a class="" href="../../datahub">Description</a>
                </li>
                <li class="toctree-l2"><a class="" href="../../datahub/usage">Usage</a>
                </li>
                <li class="toctree-l2"><a class="" href="../../datahub/examples">Example of integration</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">Apache Superset</a>
    <ul>
                <li class="toctree-l2"><a class="" href="../../superset">Description</a>
                </li>
                <li class="toctree-l2"><a class="" href="../../superset/usage">Usage</a>
                </li>
                <li class="toctree-l2"><a class="" href="../../superset/examples">Example of integration</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">Libelium sensor integration</a>
    <ul>
                <li class="toctree-l2"><a class="" href="../../sensorsIntegration">Description</a>
                </li>
                <li class="toctree-l2"><a class="" href="../../sensorsIntegration/integration">Integration</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">Wordpress</a>
    <ul>
                <li class="toctree-l2"><a class="" href="../../wordpress">Description</a>
                </li>
                <li class="toctree-l2"><a class="" href="../../wordpress/integration">Integration</a>
                </li>
                <li class="toctree-l2"><a class="" href="../../wordpress/examples">Example of deployment</a>
                </li>
    </ul>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../..">GREENGAGE Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../.." class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">Discourse Deployment Guide</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="discourse-deployment-guide">Discourse Deployment Guide</h1>
<h2 id="integrating-discourse-in-docker-environment">Integrating Discourse in Docker Environment</h2>
<h3 id="introduction">Introduction</h3>
<p><strong>Description</strong>: Discourse is a versatile forum software ideal for creating and managing online communities. Its significance in development lies in its ability to foster engagement and provide a platform for discussions.</p>
<p><strong>Objective</strong>: Deploying Discourse using Docker enhances application scalability, security, and ease of maintenance.</p>
<h3 id="prerequisites">Prerequisites</h3>
<ul>
<li>Docker and Docker Compose installed.</li>
<li>Basic knowledge of Docker and YAML syntax.</li>
</ul>
<h3 id="project-structure">Project Structure</h3>
<p><strong>Source</strong>: <a href="https://github.com/Greengage-project/Documentation/tree/main/docs/tools/Discourse/examples/docker-compose.yml">Discourse Docker Compose Example</a></p>
<p><strong>Directory Layout</strong>:</p>
<ul>
<li><code>postgresql</code>: PostgreSQL container configuration.</li>
<li><code>redis</code>: Redis container configuration.</li>
<li><code>discourse</code>: Main Discourse application container setup.</li>
<li><code>sidekiq</code>: Sidekiq container for background jobs.</li>
</ul>
<h3 id="step-by-step-setup-and-configuration">Step-by-Step Setup and Configuration</h3>
<ol>
<li>
<p><strong>Download or Clone the Docker Compose YAML File</strong>: Obtain the Docker Compose file for Discourse deployment.</p>
</li>
<li>
<p><strong>Replace Placeholders with Actual Values</strong>:</p>
</li>
<li><code>[HERE_YOUR_DOMAIN]</code>: Enter the domain where your Discourse instance will be accessible.</li>
<li><code>[HERE_ADMIN_EMAIL]</code>: Provide the email address for the Discourse administrator account.</li>
<li><code>[HERE_ADMIN_USERNAME]</code>: Set the username for the Discourse administrator.</li>
<li><code>[HERE_ADMIN_PASSWORD]</code>: Choose a secure password for the Discourse administrator account.</li>
<li><code>[HERE_SMTP_HOST]</code>: Specify the SMTP server host for sending emails.</li>
<li><code>[HERE_SMTP_PORT]</code>: Enter the port number used by your SMTP server.</li>
<li><code>[HERE_SMTP_USER]</code>: Provide the SMTP username for email authentication.</li>
<li><code>[HERE_SMTP_PASSWORD]</code>: Set the SMTP password for the email account.</li>
<li><code>[HERE_SMTP_PROTOCOL]</code>: Indicate the email protocol used by your SMTP server (e.g., TLS).</li>
</ol>
<p>Each of these placeholders corresponds to essential configuration settings for your Discourse deployment, ensuring proper functionality and access to the application.</p>
<h3 id="running-the-services">Running the Services</h3>
<ul>
<li>Run <code>docker-compose up</code> to start all services.</li>
</ul>
<h3 id="accessing-the-application">Accessing the Application</h3>
<ul>
<li>Access Discourse at the specified domain after successful deployment.</li>
</ul>
<h3 id="additional-configuration-optional">Additional Configuration (Optional)</h3>
<ol>
<li>
<p><strong>Integrating Keycloak for Single Sign-On (SSO)</strong>:</p>
</li>
<li>
<p>To enable SSO with Keycloak in Discourse:
     <code>cd /opt/bitnami/discourse
     RAILS_ENV=production bundle exec rake plugin:install repo=https://github.com/discourse/discourse-openid-connect
     RAILS_ENV=production bundle exec rake assets:precompile</code>
     This configures Discourse to use Keycloak as the authentication provider, allowing seamless login across connected services.</p>
</li>
<li>
<p><strong>Disabling Email Verification</strong>:</p>
</li>
<li>Given that Keycloak is used for user management, you might want to disable the default email verification sent by Discourse:
     <code>cd /opt/bitnami/discourse/plugins
     git clone https://github.com/codergautam/disable-email-verification-discourse.git
     cd ..
     RAILS_ENV=production bundle install
     RAILS_ENV=production bundle exec rake assets:precompile</code>
     This step ensures that the email verification step is bypassed, streamlining the registration process in a Keycloak-managed environment.</li>
</ol>
<h3 id="troubleshooting">Troubleshooting</h3>
<ul>
<li><strong>Issues with User and Site Configuration</strong>: If you encounter problems related to configuring users or site settings in your Docker-deployed Discourse instance, refer to the <a href="https://github.com/bitnami/containers/tree/main/bitnami/discourse#user-and-site-configuration">Bitnami Discourse Container Configuration Guide</a>. This resource provides detailed instructions and examples for configuring various aspects of the Discourse application within a Docker environment.</li>
<li><strong>General Docker Deployment Issues</strong>: For common Docker-related problems, such as container networking, volume management, or image retrieval issues, consult Docker's official documentation or community forums for guidance and solutions.</li>
</ul>
<h3 id="support-and-additional-resources">Support and Additional Resources</h3>
<p><strong>Support Channels</strong>: Community forums, email support.</p>
<p><strong>External Documentation</strong>: <a href="https://docs.docker.com">Docker Documentation</a>, <a href="https://docs.discourse.org">Discourse Official Documentation</a>.</p>
<h3 id="docker-integration-for-discourse">Docker Integration for Discourse</h3>
<h4 id="introduction_1">Introduction</h4>
<ul>
<li>This section focuses on integrating the Discourse forum software within a Docker containerized environment, leveraging Docker's capabilities for efficient deployment and management.</li>
</ul>
<h4 id="prerequisites_1">Prerequisites</h4>
<ul>
<li>Knowledge of Docker and Docker Compose.</li>
<li>Familiarity with YAML syntax.</li>
</ul>
<h4 id="project-structure_1">Project Structure</h4>
<ul>
<li>The Docker Compose file defines multiple services: <code>postgresql</code> for the database, <code>redis</code> for caching, <code>discourse</code> for the main application, and <code>sidekiq</code> for background jobs.</li>
<li>The <code>volumes</code> and <code>networks</code> sections manage data persistence and inter-container communication.</li>
</ul>
<h4 id="steps-for-integration">Steps for Integration</h4>
<ul>
<li>Clone or create a Docker Compose file similar to the provided example.</li>
<li>Customize the environment variables and service settings as per your requirements.</li>
</ul>
<h4 id="running-the-example">Running the Example</h4>
<ul>
<li>Execute <code>docker-compose up</code> in the directory containing your Docker Compose file to start the Discourse environment.</li>
</ul>
<h4 id="accessing-the-application_1">Accessing the Application</h4>
<ul>
<li>Once the containers are running, access Discourse through the specified domain configured in the <code>DISCOURSE_HOST</code> environment variable of the <code>discourse</code> service.</li>
</ul>
<p>For specific details, always refer to the latest official documentation of the tools involved.</p>
              
            </div>
          </div><footer>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
    
  </span>
</div>
    <script src="../../../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "../../..";</script>
    <script src="../../../js/theme_extra.js"></script>
    <script src="../../../js/theme.js"></script>
      <script src="../../../javascripts/custom.js"></script>
      <script src="../../../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
